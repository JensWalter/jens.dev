<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>[njams] how the njams_t_monitor_main status works &middot; </title>
        <meta name="description" content="nJAMS/BWPM has a rather complex system for determining the status of a process. Although all of this is easily accessible through the GUI, you sometimes need to go directly to the database for some further reporting. So here the select to get the calculated state of the GUI.
SELECT m.jobstart,o.deployment_name,o.objectname, CASE WHEN m.LASTEVENTSTATUS=&#39;3&#39; THEN &#39;error&#39; WHEN m.LASTEVENTSTATUS=&#39;2&#39; THEN &#39;warning&#39; WHEN m.LASTEVENTSTATUS=&#39;1&#39; THEN CASE WHEN m.status=&#39;3&#39; THEN &#39;success with error&#39; WHEN m.">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.110.0">
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="[njams] how the njams_t_monitor_main status works">
<meta property="og:description" content="nJAMS/BWPM has a rather complex system for determining the status of a process. Although all of this is easily accessible through the GUI, you sometimes need to go directly to the database for some further reporting. So here the select to get the calculated state of the GUI.
SELECT m.jobstart,o.deployment_name,o.objectname, CASE WHEN m.LASTEVENTSTATUS=&#39;3&#39; THEN &#39;error&#39; WHEN m.LASTEVENTSTATUS=&#39;2&#39; THEN &#39;warning&#39; WHEN m.LASTEVENTSTATUS=&#39;1&#39; THEN CASE WHEN m.status=&#39;3&#39; THEN &#39;success with error&#39; WHEN m.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://jens.dev/2015/09/16/njams-how-the-njams_t_monitor_main-status-works.html">
        <link rel="stylesheet" href="https://jens.dev/dist/site.css">
        <link rel="stylesheet" href="https://jens.dev/dist/syntax.css">
        <link rel="icon" type="image/png" href="/favicon.png">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        
        
        
        
        

    </head>
    <body>
        
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-5676095-8', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>

        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a href="https://jens.dev/">My personal blog</a>
                            </h1>
                        
                        
                            <a class="button-square" href="https://jens.dev/index.xml" aria-label="RSS"><i class="fa fa-rss" aria-hidden="true"></i></a>
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Twitter" aria-label="Twitter" href="https://twitter.com/jens_walter" rel="me" >
                                <i class="fa fa-twitter" aria-hidden="true"></i>
                            </a>
                        
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" aria-label="Github" href="https://github.com/JensWalter" rel="me">
                                <i class="fa fa-github-alt" aria-hidden="true"></i>
                            </a>
                        
                        
                        
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a href="/">Blog</a>
    </li>

    <li class="site-nav-item">
        <a href="/project.html">Projects</a>
    </li>


                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">[njams] how the njams_t_monitor_main status works</h1>
    
    <p class="post-date post-line">
        <span>Published <time datetime="2015-09-16" itemprop="datePublished">Wed, Sep 16, 2015</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="#" itemprop="url" rel="author"></a>
            </span>
        </span>
    </p>
    
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    <p>nJAMS/BWPM has a rather complex system for determining the status of a process.
Although all of this is easily accessible through the GUI, you sometimes need to go directly to the database for some further reporting. So here the select to get the calculated state of the GUI.</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#00a8c8">SELECT</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">jobstart</span><span style="color:#111">,</span><span style="color:#111">o</span><span style="color:#111">.</span><span style="color:#111">deployment_name</span><span style="color:#111">,</span><span style="color:#111">o</span><span style="color:#111">.</span><span style="color:#111">objectname</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">CASE</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">WHEN</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">LASTEVENTSTATUS</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;3&#39;</span> <span style="color:#00a8c8">THEN</span> <span style="color:#d88200">&#39;error&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">WHEN</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">LASTEVENTSTATUS</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;2&#39;</span> <span style="color:#00a8c8">THEN</span> <span style="color:#d88200">&#39;warning&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">WHEN</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">LASTEVENTSTATUS</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;1&#39;</span> <span style="color:#00a8c8">THEN</span>
</span></span><span style="display:flex;"><span>      <span style="color:#00a8c8">CASE</span>
</span></span><span style="display:flex;"><span>        <span style="color:#00a8c8">WHEN</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">status</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;3&#39;</span> <span style="color:#00a8c8">THEN</span> <span style="color:#d88200">&#39;success with error&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#00a8c8">WHEN</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">status</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;2&#39;</span> <span style="color:#00a8c8">THEN</span> <span style="color:#d88200">&#39;success with warning&#39;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#00a8c8">WHEN</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">status</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;1&#39;</span> <span style="color:#00a8c8">THEN</span> <span style="color:#d88200">&#39;success&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#00a8c8">END</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">WHEN</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">LASTEVENTSTATUS</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;0&#39;</span> <span style="color:#00a8c8">THEN</span> <span style="color:#d88200">&#39;running&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">END</span> <span style="color:#111">status</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">FROM</span> <span style="color:#111">njams_t_monitor_main</span> <span style="color:#111">m</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">INNER</span> <span style="color:#00a8c8">JOIN</span> <span style="color:#111">njams_t_domain_objects</span> <span style="color:#111">o</span> <span style="color:#00a8c8">ON</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">DOMAIN_OBJECT_ID</span><span style="color:#f92672">=</span><span style="color:#111">o</span><span style="color:#111">.</span><span style="color:#111">OBJ_ID</span>
</span></span></code></pre></div><p><strong>result:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">jobstart</th>
<th>deployment</th>
<th>process</th>
<th style="text-align:center">status</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">15-07-16 13:57:00</td>
<td>C1_Services</td>
<td>O/C/Starter_C1_SendOrder.process</td>
<td style="text-align:center"><strong>success</strong></td>
</tr>
<tr>
<td style="text-align:center">15-07-16 14:04:00</td>
<td>ESB_Engine</td>
<td>O/O/Starter_OrderTransformationService.process</td>
<td style="text-align:center"><strong>success</strong></td>
</tr>
<tr>
<td style="text-align:center">15-07-16 14:05:00</td>
<td>SAP_Services</td>
<td>O/S/Starter_ReceiveOrder_SAP.process</td>
<td style="text-align:center"><strong>success</strong></td>
</tr>
<tr>
<td style="text-align:center">15-07-16 14:08:00</td>
<td>ESB_Engine</td>
<td>O/O/Starter_OrderTransformationService.process</td>
<td style="text-align:center"><strong>error</strong></td>
</tr>
<tr>
<td style="text-align:center">15-07-16 14:09:30</td>
<td>ESB_Engine</td>
<td>O/O/Starter_OrderConfirmationService.process</td>
<td style="text-align:center"><strong>warning</strong></td>
</tr>
<tr>
<td style="text-align:center">15-07-16 14:10:30</td>
<td>C1_Services</td>
<td>O/C/Starter_ReceiveOrderConfirmation_C1.process</td>
<td style="text-align:center"><strong>success</strong></td>
</tr>
<tr>
<td style="text-align:center">15-07-16 14:11:30</td>
<td>C1_Services</td>
<td>O/C/Starter_ReceiveOrderConfirmation_C1.process</td>
<td style="text-align:center"><strong>success with warning</strong></td>
</tr>
<tr>
<td style="text-align:center">15-07-16 14:59:30</td>
<td>SAP_Services</td>
<td>O/S/Starter_SAP_SendOrderConfirmation.process</td>
<td style="text-align:center"><strong>success with error</strong></td>
</tr>
<tr>
<td style="text-align:center">15-07-16 15:00:00</td>
<td>DWH_Services</td>
<td>O/D/Starter_ReceiveOrder_DWH.process</td>
<td style="text-align:center"><strong>success</strong></td>
</tr>
<tr>
<td style="text-align:center">15-07-16 15:02:00</td>
<td>C1_Services</td>
<td>O/C/Starter_C1_SendOrder.process</td>
<td style="text-align:center"><strong>success</strong></td>
</tr>
</tbody>
</table>
<p> 
 </p>
<blockquote>
<p>all the stuff shown here works with version 3.1, no clue about other versions of the software</p>
</blockquote>

</div>

        <footer class="post-footer clearfix">
        <p class="post-tags">
            <span>Tagged:</span>
                <a href="/tags/njams.html">njams</a>
        </p>
    <div class="share">
    </div>
</footer>

        
    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a href="https://jens.dev/">My personal blog</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#" aria-label="Back to Top">
                        <i class="fa fa-angle-up" aria-hidden="true"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2022 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="https://jens.dev/js/jquery-1.11.3.min.js"></script>
        <script src="https://jens.dev/js/jquery.fitvids.js"></script>
        <script src="https://jens.dev/js/scripts.js"></script>
    </body>
</html>

