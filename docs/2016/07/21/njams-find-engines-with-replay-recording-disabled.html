<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>[njams] find engines with replay recording disabled &middot; </title>
        <meta name="description" content="From time to time it happens that somebody disables njams replay recording on some engine for whatever reason and forgets about it. So later on when you need an overview on what engine recording is actually disabled, you can run the following select to gather that insight.
The select checks if there are messages, which have/had no recorded information for replay. As a safeguard, the query checks if later jobs of the affected engine report recorded data (recording was re-enabled afterwards).">
        <meta name="HandheldFriendly" content="True">
        <meta name="MobileOptimized" content="320">
        <meta name="generator" content="Hugo 0.110.0">
        <meta name="robots" content="index,follow">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta property="og:title" content="[njams] find engines with replay recording disabled">
<meta property="og:description" content="From time to time it happens that somebody disables njams replay recording on some engine for whatever reason and forgets about it. So later on when you need an overview on what engine recording is actually disabled, you can run the following select to gather that insight.
The select checks if there are messages, which have/had no recorded information for replay. As a safeguard, the query checks if later jobs of the affected engine report recorded data (recording was re-enabled afterwards).">
<meta property="og:type" content="article">
<meta property="og:url" content="https://jens.dev/2016/07/21/njams-find-engines-with-replay-recording-disabled.html">
        <link rel="stylesheet" href="https://jens.dev/dist/site.css">
        <link rel="stylesheet" href="https://jens.dev/dist/syntax.css">
        <link rel="icon" type="image/png" href="/favicon.png">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <link rel="stylesheet" href="/bootstrap-icons-1.10.3/bootstrap-icons.css">
        
        
        
        
        

    </head>
    <body>
        
<script type="application/javascript">
var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
var doNotTrack = (dnt == "1" || dnt == "yes");
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-5676095-8', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>

        <div id="wrapper">
            <header class="site-header">
                <div class="container">
                    <div class="site-title-wrapper">
                        
                            <h1 class="site-title">
                                <a href="https://jens.dev/">My personal blog</a>
                            </h1>
                        
                        
                            <a class="button-square" href="https://jens.dev/index.xml" aria-label="RSS"><i class="bi bi-rss-fill" aria-label="RSS"></i></a>
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Mastodon" aria-label="Mastodon" href="https://hachyderm.io/@jenswalter" rel="me" >
                                <i class="bi bi-mastodon"></i>
                            </a>
                        
                        
                        
                        
                            <a class="button-square button-social hint--top" data-hint="Github" aria-label="Github" href="https://github.com/JensWalter" rel="me">
                                <i class="bi bi-github"></i>
                            </a>
                        
                        
                        
                        
                    </div>

                    <ul class="site-nav">
                        
    <li class="site-nav-item">
        <a href="/">Blog</a>
    </li>

    <li class="site-nav-item">
        <a href="/project.html">Projects</a>
    </li>


                    </ul>
                </div>
            </header>

            <div id="container">


<div class="container">
    <article class="post-container" itemscope="" itemtype="http://schema.org/BlogPosting">
        <header class="post-header">
    <h1 class="post-title" itemprop="name headline">[njams] find engines with replay recording disabled</h1>
    
    <p class="post-date post-line">
        <span>Published <time datetime="2016-07-21" itemprop="datePublished">Thu, Jul 21, 2016</time></span>
        <span>by</span>
        <span itemscope="" itemprop="author" itemtype="https://schema.org/Person">
            <span itemprop="name">
                <a href="#" itemprop="url" rel="author"></a>
            </span>
        </span>
    </p>
    
</header>

        <div class="post-content clearfix" itemprop="articleBody">
    

    <p>From time to time it happens that somebody disables njams replay recording on some engine for whatever reason and forgets about it. So later on when you need an overview on what engine recording is actually disabled, you can run the following select to gather that insight.</p>
<p>The select checks if there are messages, which have/had no recorded information for replay. As a safeguard, the query checks if later jobs of the affected engine report recorded data (recording was re-enabled afterwards).</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#00a8c8">select</span> <span style="color:#111">engine_name</span><span style="color:#111">,</span><span style="color:#111">objectname</span> <span style="color:#111">process_name</span><span style="color:#111">,</span><span style="color:#00a8c8">max</span><span style="color:#111">(</span><span style="color:#111">attribute_ts</span><span style="color:#111">)</span> <span style="color:#111">last_activity</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">from</span> <span style="color:#111">(</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">select</span> <span style="color:#111">a</span><span style="color:#111">.</span><span style="color:#111">main_logid</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">sum</span><span style="color:#111">(</span><span style="color:#00a8c8">case</span> <span style="color:#00a8c8">when</span> <span style="color:#111">attribute_name</span><span style="color:#f92672">=</span><span style="color:#d88200">&#39;$njams_recorded&#39;</span> <span style="color:#00a8c8">then</span> <span style="color:#ae81ff">1</span> <span style="color:#00a8c8">else</span> <span style="color:#ae81ff">0</span> <span style="color:#00a8c8">end</span><span style="color:#111">)</span> <span style="color:#111">recorded</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#00a8c8">max</span><span style="color:#111">(</span><span style="color:#111">a</span><span style="color:#111">.</span><span style="color:#111">attribute_ts</span><span style="color:#111">)</span> <span style="color:#111">attribute_ts</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">from</span> <span style="color:#111">njams_t_monitor_attributes</span> <span style="color:#111">a</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">group</span> <span style="color:#00a8c8">by</span> <span style="color:#111">a</span><span style="color:#111">.</span><span style="color:#111">main_logid</span>
</span></span><span style="display:flex;"><span><span style="color:#111">)</span> <span style="color:#111">x</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">inner</span> <span style="color:#00a8c8">join</span> <span style="color:#111">njams_t_monitor_main</span> <span style="color:#111">m</span> <span style="color:#00a8c8">on</span> <span style="color:#111">x</span><span style="color:#111">.</span><span style="color:#111">main_logid</span><span style="color:#f92672">=</span><span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">logid</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">inner</span> <span style="color:#00a8c8">join</span> <span style="color:#111">njams_t_domain_objects</span> <span style="color:#111">o</span> <span style="color:#00a8c8">on</span> <span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">domain_object_id</span><span style="color:#f92672">=</span><span style="color:#111">o</span><span style="color:#111">.</span><span style="color:#111">obj_id</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">where</span> <span style="color:#111">x</span><span style="color:#111">.</span><span style="color:#111">recorded</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#00a8c8">and</span> <span style="color:#111">x</span><span style="color:#111">.</span><span style="color:#111">attribute_ts</span> <span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">nvl</span><span style="color:#111">(</span>
</span></span><span style="display:flex;"><span>      <span style="color:#111">(</span><span style="color:#00a8c8">select</span> <span style="color:#00a8c8">max</span><span style="color:#111">(</span><span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">jobstart</span><span style="color:#111">)</span> <span style="color:#111">jobstart</span>
</span></span><span style="display:flex;"><span>       <span style="color:#00a8c8">from</span> <span style="color:#111">njams_t_monitor_main</span> <span style="color:#111">m</span>
</span></span><span style="display:flex;"><span>       <span style="color:#00a8c8">where</span> <span style="color:#111">o</span><span style="color:#111">.</span><span style="color:#111">obj_id</span><span style="color:#f92672">=</span><span style="color:#111">m</span><span style="color:#111">.</span><span style="color:#111">domain_object_id</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span>      <span style="color:#111">,</span><span style="color:#111">sysdate</span><span style="color:#f92672">-</span><span style="color:#ae81ff">999</span><span style="color:#111">)</span>
</span></span><span style="display:flex;"><span><span style="color:#00a8c8">group</span> <span style="color:#00a8c8">by</span> <span style="color:#111">o</span><span style="color:#111">.</span><span style="color:#111">engine_name</span><span style="color:#111">,</span><span style="color:#111">o</span><span style="color:#111">.</span><span style="color:#111">objectname</span>
</span></span></code></pre></div><p><strong>result:</strong></p>
<table>
<thead>
<tr>
<th>engine_name</th>
<th style="text-align:left">process_name</th>
<th style="text-align:left">last_activity</th>
</tr>
</thead>
<tbody>
<tr>
<td>process_dot</td>
<td style="text-align:left">process_nesting/Starter.process</td>
<td style="text-align:left">16-07-20 12:57:51.142</td>
</tr>
<tr>
<td>yf-sample</td>
<td style="text-align:left">fetch/starter.process</td>
<td style="text-align:left">16-07-14 16:10:45.338</td>
</tr>
</tbody>
</table>
<p> 
 </p>
<blockquote>
<p>all the stuff shown here works with version 3.1, no clue about other versions of the software</p>
</blockquote>

</div>

        <footer class="post-footer clearfix">
        <p class="post-tags">
            <span>Tagged:</span>
                <a href="/tags/njams.html">njams</a>
        </p>
    <div class="share">
    </div>
</footer>

        
    </article>
</div>

            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="site-title-wrapper">
                    <h1 class="site-title">
                        <a href="https://jens.dev/">My personal blog</a>
                    </h1>
                    <a class="button-square button-jump-top js-jump-top" href="#" aria-label="Back to Top">
                        <i class="fa fa-angle-up" aria-hidden="true"></i>
                    </a>
                </div>

                <p class="footer-copyright">
                    <span>&copy; 2022 / Powered by <a href="https://gohugo.io/">Hugo</a></span>
                </p>
                <p class="footer-copyright">
                    <span><a href="https://github.com/roryg/ghostwriter">Ghostwriter theme</a> By <a href="http://jollygoodthemes.com">JollyGoodThemes</a></span>
                    <span>/ <a href="https://github.com/jbub/ghostwriter">Ported</a> to Hugo By <a href="https://github.com/jbub">jbub</a></span>
                </p>
            </div>
        </footer>

        <script src="https://jens.dev/js/jquery-1.11.3.min.js"></script>
        <script src="https://jens.dev/js/jquery.fitvids.js"></script>
        <script src="https://jens.dev/js/scripts.js"></script>
    </body>
</html>

